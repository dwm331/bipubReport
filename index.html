<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script type="text/javascript" src="DBdata.js"></script>
    <script type="text/javascript" src="func.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>

<h1>My First Heading</h1>
<p>My first paragraph.</p>
<canvas id="myChart" width="400" height="400"></canvas>
<script>
    //console.log(DB_Products);
    //console.log(DB_Quantums);
    var search_country = "越南";
    var startDate = new Date("2022-07-20");
    var endDate = new Date("2022-08-31");
    var x_axis = getXaxis(startDate, endDate);
    console.log(x_axis);

    var result = DB_Quantums.filter(obj => {
        var from = Date.parse(obj.date);
        return obj.country === search_country && from > startDate
    })
    console.log("==result==", result);

    var xxValues = [];
    x_axis.forEach(function(element){
        var tmp = result.find(item => item.date == element);
        console.log(element, tmp);
        if(tmp != null) {
            xxValues.push(tmp.weights);
        } else {
            xxValues.push(0);
        }
    });

    const ctx = document.getElementById('myChart').getContext('2d');
    const myChart = new Chart(ctx, {
    type: 'line',
    data: {
        labels: x_axis,
        datasets: [{
            label: search_country,
            data: xxValues,
            backgroundColor: 'rgb(255, 99, 132)',
            borderColor: 'rgb(255, 99, 132)',
            borderWidth: 1
        }]
    },
    options: {
        scales: {
            y: {
                beginAtZero: true
            }
        }
    }
});

</script>
</body>
</html>